
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://the-obstacle-is-the-way.github.io/ai-psychiatrist/_archive/data/spec-data-split-fix/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>SPEC: Data Split Correction and Artifact Regeneration - AI Psychiatrist</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spec-data-split-correction-and-artifact-regeneration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AI Psychiatrist" class="md-header__button md-logo" aria-label="AI Psychiatrist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI Psychiatrist
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SPEC: Data Split Correction and Artifact Regeneration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AI Psychiatrist" class="md-nav__button md-logo" aria-label="AI Psychiatrist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AI Psychiatrist
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Psychiatrist Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
     research
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
     research
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../_research/hypotheses-explained/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypotheses Explained: Current State vs Future Improvements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../_research/hypotheses-for-improvement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypotheses for Improvement: First-Principles Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../_research/master-bug-audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MASTER BUG AUDIT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/future-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Future Architecture: Agent Orchestration Options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Clinical
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clinical
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/clinical-understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clinical Understanding: How This System Works
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/phq8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PHQ-8: Patient Health Questionnaire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/task-validity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Validity: What Can (and Cannot) Be Inferred from DAIC-WOZ Transcripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Configs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../configs/agent-sampling-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Sampling Parameter Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../configs/configuration-philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../configs/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/artifact-namespace-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Artifact Namespace Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/daic-woz-preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DAIC-WOZ Transcript Preprocessing (Bias-Aware, Deterministic)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/daic-woz-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DAIC-WOZ Dataset Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/data-splits-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Splits Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/api-endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/dependency-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependency Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/error-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Fail-Fast Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exception Reference (Domain + Runtime)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Conventions (Markers, Fixtures, and Test Doubles)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Psychiatrist Model Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-wiring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Wiring: Current State
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pipeline internals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pipeline internals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pipeline-internals/evidence-extraction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evidence Extraction Mechanism: How It Actually Works
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pipeline-internals/features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Reference (Non-Archive Canonical)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Preflight checklist
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Preflight checklist
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../preflight-checklist/preflight-checklist-few-shot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preflight Checklist: Few-Shot Reproduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../preflight-checklist/preflight-checklist-zero-shot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preflight Checklist: Zero-Shot Run
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Rag
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rag
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/artifact-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Artifact Generation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/chunk-scoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunk-Level Scoring (Spec 35) — Schema, Workflow, and Gotchas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Debugging (Audit Logs + Guardrails)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/design-rationale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Design Rationale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Overview: Embeddings and Few-Shot Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/runtime-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Runtime Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Results
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/few-shot-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Why Few-Shot May Not Beat Zero-Shot: Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/reproduction-results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Paper Reproduction Results (Current Status)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/run-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete Run History &amp; Statistical Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/run-output-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reproduction Run Output Schema (JSON + Registry)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Statistics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    Statistics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../statistics/coverage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coverage Explained: What It Is and Why It Matters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../statistics/metrics-and-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics and Evaluation (Exact Definitions + Output Schema)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../statistics/statistical-methodology-aurc-augrc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Statistical Methodology: AURC/AUGRC for Selective Prediction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-current-state-wrong" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Current State (WRONG)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Current State (WRONG)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-wrong-paper-splits" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Wrong Paper Splits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-wrong-embeddings" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Wrong Embeddings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-current-script-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Current Script Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-blast-radius-what-breaks-if-these-files-are-missingwrong" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4 Blast Radius (What Breaks If These Files Are Missing/Wrong)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-ground-truth-correct" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Ground Truth (CORRECT)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Ground Truth (CORRECT)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-source-of-truth" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Source of Truth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-correct-participant-ids" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Correct Participant IDs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Verification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-verified-against-this-repo-snapshot-2025-12-25" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Verified Against This Repo Snapshot (2025-12-25)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-files-to-delete" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Files to DELETE
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Files to DELETE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-paper-splits-replace-with-correct-ids" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Paper Splits (Replace with correct IDs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-embeddings-regenerate-from-correct-train" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Embeddings (Regenerate from correct TRAIN)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-scripts-to-modify" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Scripts to MODIFY
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Scripts to MODIFY">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-scriptscreate_paper_splitpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 scripts/create_paper_split.py
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 scripts/create_paper_split.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#design-decision-hardcode-vs-external-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Design Decision: Hardcode vs External File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes Required
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-testsunitscriptstest_create_paper_splitpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 tests/unit/scripts/test_create_paper_split.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-scriptsgenerate_embeddingspy" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 scripts/generate_embeddings.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-scriptsreproduce_resultspy" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 scripts/reproduce_results.py
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-documentation-to-update-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Documentation to UPDATE (Required)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-namespace-and-folder-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Namespace and Folder Conventions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Namespace and Folder Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-current-naming-keep" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Current Naming (Keep)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-folder-structure-keep" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Folder Structure (Keep)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-metadata-provenance" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Metadata Provenance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-implementation-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Implementation Steps
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Implementation Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-script-update" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Script Update
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-delete-wrong-artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: Delete Wrong Artifacts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-regenerate-correct-artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Regenerate Correct Artifacts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 4: Verification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5-commit-and-pr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 5: Commit and PR
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-post-fix-verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Post-Fix Verification Checklist
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-risks-and-mitigations" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Risks and Mitigations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-files-modified-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Files Modified Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-acceptance-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Acceptance Criteria
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-related-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Related Documentation
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist/edit/main/docs/_archive/data/spec-data-split-fix.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist/raw/main/docs/_archive/data/spec-data-split-fix.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="spec-data-split-correction-and-artifact-regeneration">SPEC: Data Split Correction and Artifact Regeneration</h1>
<blockquote>
<p><strong>Status</strong>: IMPLEMENTED
<strong>Branch</strong>: <code>fix/paper-data-splits</code>
<strong>Priority</strong>: HIGH - Blocks paper reproduction parity
<strong>Related</strong>: GH Issue #45, <code>critical-data-split-mismatch.md</code>
<strong>Date</strong>: 2025-12-25</p>
</blockquote>
<hr />
<h2 id="executive-summary">Executive Summary</h2>
<p>Our <code>data/paper_splits/</code> files were generated algorithmically with seed=42, producing participant IDs that <strong>do not match</strong> the paper's actual splits. Our legacy paper embeddings artifact (<code>data/embeddings/paper_reference_embeddings.*</code>) was generated from <code>data/paper_splits/paper_split_train.csv</code>, so it inherits the same wrong membership.</p>
<p>The ground truth was reverse-engineered from the paper authors' output files and is documented in <code>docs/data/paper-split-registry.md</code>.</p>
<p><strong>This spec defines the complete fix</strong>: delete wrong artifacts, update scripts to use ground truth IDs, and regenerate all dependent artifacts.</p>
<p><strong>Important repo constraint</strong>: <code>data/*</code> is gitignored due to DAIC-WOZ licensing. This work must <strong>not</strong> commit dataset-derived CSVs or embeddings; it commits only code + docs changes and regenerates <code>data/...</code> artifacts locally.</p>
<hr />
<h2 id="1-current-state-wrong">1. Current State (WRONG)</h2>
<p>Note: This section describes the pre-fix state that motivated the work; it is no longer the current behavior.</p>
<h3 id="11-wrong-paper-splits">1.1 Wrong Paper Splits</h3>
<table>
<thead>
<tr>
<th>File</th>
<th>Status</th>
<th>Issue</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data/paper_splits/paper_split_train.csv</code></td>
<td>❌ WRONG</td>
<td>27 wrong participant IDs</td>
</tr>
<tr>
<td><code>data/paper_splits/paper_split_val.csv</code></td>
<td>❌ WRONG</td>
<td>25 wrong participant IDs</td>
</tr>
<tr>
<td><code>data/paper_splits/paper_split_test.csv</code></td>
<td>❌ WRONG</td>
<td>26 wrong participant IDs</td>
</tr>
<tr>
<td><code>data/paper_splits/paper_split_metadata.json</code></td>
<td>❌ WRONG</td>
<td>Contains wrong IDs</td>
</tr>
</tbody>
</table>
<p><strong>Evidence</strong>: Comparison in <code>critical-data-split-mismatch.md</code> shows ~50% participant mismatch per split.</p>
<h3 id="12-wrong-embeddings">1.2 Wrong Embeddings</h3>
<table>
<thead>
<tr>
<th>File</th>
<th>Status</th>
<th>Issue</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data/embeddings/paper_reference_embeddings.npz</code></td>
<td>❌ WRONG</td>
<td>Generated from the <strong>algorithmic</strong> TRAIN split (31 overlap with ground truth; 27 extra + 27 missing)</td>
</tr>
<tr>
<td><code>data/embeddings/paper_reference_embeddings.json</code></td>
<td>❌ WRONG</td>
<td>Text chunks keyed by those same algorithmic TRAIN participant IDs</td>
</tr>
</tbody>
</table>
<p><strong>Impact</strong>: Few-shot retrieval uses embeddings from wrong participants → different similarity matches → different predictions → cannot reproduce paper results.</p>
<h3 id="13-current-script-behavior">1.3 Current Script Behavior</h3>
<p><code>scripts/create_paper_split.py</code> implements the paper's <strong>stratification algorithm</strong> (Appendix C) but:
- Uses <code>random.Random(seed=42)</code> to assign participants
- The paper authors never disclosed their seed
- Result: Correct sizes (58/43/41) but wrong participant assignments</p>
<h3 id="14-blast-radius-what-breaks-if-these-files-are-missingwrong">1.4 Blast Radius (What Breaks If These Files Are Missing/Wrong)</h3>
<p><strong>Embeddings artifact (<code>paper_reference_embeddings.*</code>)</strong></p>
<ul>
<li><code>src/ai_psychiatrist/config.py</code> defaults few-shot to <code>huggingface_qwen3_8b_paper_train</code> (via <code>EmbeddingSettings.embeddings_file</code> and <code>DataSettings.embeddings_path</code>). The legacy/compat basename <code>paper_reference_embeddings</code> is still supported but must be explicitly selected.</li>
<li><code>src/ai_psychiatrist/services/reference_store.py</code> expects <code>{embeddings}.npz</code> + <code>{embeddings}.json</code> sidecar; without them it loads an empty store (few-shot degraded) and <code>scripts/reproduce_results.py</code> fails fast for few-shot mode.</li>
<li><code>scripts/reproduce_results.py</code> requires a precomputed embeddings artifact for few-shot evaluation (<code>--few-shot-only</code> or default combined run).</li>
</ul>
<p><strong>Paper split CSVs (<code>paper_split_*.csv</code>)</strong></p>
<ul>
<li><code>scripts/generate_embeddings.py --split paper-train</code> reads <code>data/paper_splits/paper_split_train.csv</code> to choose the 58 knowledge-base participants.</li>
<li><code>scripts/reproduce_results.py --split paper*</code> reads <code>data/paper_splits/paper_split_{train,val,test}.csv</code> for paper-split evaluation.</li>
</ul>
<p><strong>AVEC embeddings artifact (<code>reference_embeddings.*</code>)</strong></p>
<ul>
<li><code>data/embeddings/reference_embeddings.npz</code> / <code>.json</code> (107 participants) is an AVEC-train knowledge base artifact (optional; not present in this repo snapshot). It is unaffected by this spec and should <strong>not</strong> be deleted if it exists locally.</li>
</ul>
<p><strong>Tests</strong></p>
<ul>
<li>Unit tests do not rely on local <code>data/*</code> artifacts (they are gitignored); deleting embeddings/splits does not break tests.</li>
<li>The one exception is that <code>tests/unit/scripts/test_create_paper_split.py</code> must be updated to cover the new ground-truth mode (and should keep the existing algorithmic <code>stratified_split</code> tests).</li>
</ul>
<hr />
<h2 id="2-ground-truth-correct">2. Ground Truth (CORRECT)</h2>
<h3 id="21-source-of-truth">2.1 Source of Truth</h3>
<p><strong>File</strong>: <code>docs/data/paper-split-registry.md</code></p>
<p><strong>Provenance</strong>: Reverse-engineered from paper authors' actual output files in <code>_reference/analysis_output/</code>:
- TRAIN: Derived from <code>quan_gemma_zero_shot.jsonl</code> minus TEST minus VAL
- VAL: From <code>quan_gemma_few_shot/VAL_analysis_output/*.jsonl</code>
- TEST: From <code>quan_gemma_few_shot/TEST_analysis_output/*.jsonl</code></p>
<h3 id="22-correct-participant-ids">2.2 Correct Participant IDs</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># GROUND TRUTH - From docs/data/paper-split-registry.md</span>
<span class="n">TRAIN_IDS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">303</span><span class="p">,</span> <span class="mi">304</span><span class="p">,</span> <span class="mi">305</span><span class="p">,</span> <span class="mi">310</span><span class="p">,</span> <span class="mi">312</span><span class="p">,</span> <span class="mi">313</span><span class="p">,</span> <span class="mi">315</span><span class="p">,</span> <span class="mi">317</span><span class="p">,</span> <span class="mi">318</span><span class="p">,</span> <span class="mi">321</span><span class="p">,</span> <span class="mi">324</span><span class="p">,</span> <span class="mi">327</span><span class="p">,</span> <span class="mi">335</span><span class="p">,</span> <span class="mi">338</span><span class="p">,</span> <span class="mi">340</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span>
    <span class="mi">344</span><span class="p">,</span> <span class="mi">346</span><span class="p">,</span> <span class="mi">347</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">352</span><span class="p">,</span> <span class="mi">356</span><span class="p">,</span> <span class="mi">363</span><span class="p">,</span> <span class="mi">368</span><span class="p">,</span> <span class="mi">369</span><span class="p">,</span> <span class="mi">388</span><span class="p">,</span> <span class="mi">391</span><span class="p">,</span> <span class="mi">395</span><span class="p">,</span> <span class="mi">397</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">402</span><span class="p">,</span> <span class="mi">404</span><span class="p">,</span>
    <span class="mi">406</span><span class="p">,</span> <span class="mi">412</span><span class="p">,</span> <span class="mi">414</span><span class="p">,</span> <span class="mi">415</span><span class="p">,</span> <span class="mi">416</span><span class="p">,</span> <span class="mi">418</span><span class="p">,</span> <span class="mi">426</span><span class="p">,</span> <span class="mi">429</span><span class="p">,</span> <span class="mi">433</span><span class="p">,</span> <span class="mi">434</span><span class="p">,</span> <span class="mi">437</span><span class="p">,</span> <span class="mi">439</span><span class="p">,</span> <span class="mi">444</span><span class="p">,</span> <span class="mi">458</span><span class="p">,</span> <span class="mi">463</span><span class="p">,</span> <span class="mi">464</span><span class="p">,</span>
    <span class="mi">473</span><span class="p">,</span> <span class="mi">474</span><span class="p">,</span> <span class="mi">475</span><span class="p">,</span> <span class="mi">476</span><span class="p">,</span> <span class="mi">477</span><span class="p">,</span> <span class="mi">478</span><span class="p">,</span> <span class="mi">483</span><span class="p">,</span> <span class="mi">486</span><span class="p">,</span> <span class="mi">488</span><span class="p">,</span> <span class="mi">491</span>
<span class="p">]</span>  <span class="c1"># 58 participants</span>

<span class="n">VAL_IDS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">302</span><span class="p">,</span> <span class="mi">307</span><span class="p">,</span> <span class="mi">320</span><span class="p">,</span> <span class="mi">322</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">326</span><span class="p">,</span> <span class="mi">328</span><span class="p">,</span> <span class="mi">331</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mi">336</span><span class="p">,</span> <span class="mi">341</span><span class="p">,</span> <span class="mi">348</span><span class="p">,</span> <span class="mi">351</span><span class="p">,</span> <span class="mi">353</span><span class="p">,</span> <span class="mi">355</span><span class="p">,</span> <span class="mi">358</span><span class="p">,</span>
    <span class="mi">360</span><span class="p">,</span> <span class="mi">364</span><span class="p">,</span> <span class="mi">366</span><span class="p">,</span> <span class="mi">371</span><span class="p">,</span> <span class="mi">372</span><span class="p">,</span> <span class="mi">374</span><span class="p">,</span> <span class="mi">376</span><span class="p">,</span> <span class="mi">380</span><span class="p">,</span> <span class="mi">381</span><span class="p">,</span> <span class="mi">382</span><span class="p">,</span> <span class="mi">392</span><span class="p">,</span> <span class="mi">401</span><span class="p">,</span> <span class="mi">403</span><span class="p">,</span> <span class="mi">419</span><span class="p">,</span> <span class="mi">420</span><span class="p">,</span> <span class="mi">425</span><span class="p">,</span>
    <span class="mi">440</span><span class="p">,</span> <span class="mi">443</span><span class="p">,</span> <span class="mi">446</span><span class="p">,</span> <span class="mi">448</span><span class="p">,</span> <span class="mi">454</span><span class="p">,</span> <span class="mi">457</span><span class="p">,</span> <span class="mi">471</span><span class="p">,</span> <span class="mi">479</span><span class="p">,</span> <span class="mi">482</span><span class="p">,</span> <span class="mi">490</span><span class="p">,</span> <span class="mi">492</span>
<span class="p">]</span>  <span class="c1"># 43 participants</span>

<span class="n">TEST_IDS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">316</span><span class="p">,</span> <span class="mi">319</span><span class="p">,</span> <span class="mi">330</span><span class="p">,</span> <span class="mi">339</span><span class="p">,</span> <span class="mi">345</span><span class="p">,</span> <span class="mi">357</span><span class="p">,</span> <span class="mi">362</span><span class="p">,</span> <span class="mi">367</span><span class="p">,</span> <span class="mi">370</span><span class="p">,</span> <span class="mi">375</span><span class="p">,</span> <span class="mi">377</span><span class="p">,</span> <span class="mi">379</span><span class="p">,</span> <span class="mi">383</span><span class="p">,</span> <span class="mi">385</span><span class="p">,</span> <span class="mi">386</span><span class="p">,</span> <span class="mi">389</span><span class="p">,</span>
    <span class="mi">390</span><span class="p">,</span> <span class="mi">393</span><span class="p">,</span> <span class="mi">409</span><span class="p">,</span> <span class="mi">413</span><span class="p">,</span> <span class="mi">417</span><span class="p">,</span> <span class="mi">422</span><span class="p">,</span> <span class="mi">423</span><span class="p">,</span> <span class="mi">427</span><span class="p">,</span> <span class="mi">428</span><span class="p">,</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">441</span><span class="p">,</span> <span class="mi">445</span><span class="p">,</span> <span class="mi">447</span><span class="p">,</span> <span class="mi">449</span><span class="p">,</span> <span class="mi">451</span><span class="p">,</span>
    <span class="mi">455</span><span class="p">,</span> <span class="mi">456</span><span class="p">,</span> <span class="mi">459</span><span class="p">,</span> <span class="mi">468</span><span class="p">,</span> <span class="mi">472</span><span class="p">,</span> <span class="mi">484</span><span class="p">,</span> <span class="mi">485</span><span class="p">,</span> <span class="mi">487</span><span class="p">,</span> <span class="mi">489</span>
<span class="p">]</span>  <span class="c1"># 41 participants</span>
</code></pre></div>
<h3 id="23-verification">2.3 Verification</h3>
<table>
<thead>
<tr>
<th>Check</th>
<th>Expected</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>TRAIN + VAL + TEST</td>
<td>142</td>
<td>Paper Section 2.4.1</td>
</tr>
<tr>
<td>TRAIN ∩ VAL</td>
<td>0</td>
<td>No overlap</td>
</tr>
<tr>
<td>TRAIN ∩ TEST</td>
<td>0</td>
<td>No overlap</td>
</tr>
<tr>
<td>VAL ∩ TEST</td>
<td>0</td>
<td>No overlap</td>
</tr>
<tr>
<td>All IDs have PHQ-8 labels</td>
<td>Yes</td>
<td>Combined AVEC train+dev</td>
</tr>
</tbody>
</table>
<h3 id="24-verified-against-this-repo-snapshot-2025-12-25">2.4 Verified Against This Repo Snapshot (2025-12-25)</h3>
<p>The ground-truth registry is internally consistent and matches the local dataset files:</p>
<ul>
<li>58/43/41 IDs in <code>docs/data/paper-split-registry.md</code>, total 142, no overlaps</li>
<li>All 142 IDs exist in <code>data/train_split_Depression_AVEC2017.csv</code> ∪ <code>data/dev_split_Depression_AVEC2017.csv</code></li>
<li>All 142 IDs exist as transcript directories under <code>data/transcripts/{ID}_P/</code></li>
<li>No registry IDs overlap <code>data/test_split_Depression_AVEC2017.csv</code> (unlabeled AVEC test)</li>
</ul>
<hr />
<h2 id="3-files-to-delete">3. Files to DELETE</h2>
<h3 id="31-paper-splits-replace-with-correct-ids">3.1 Paper Splits (Replace with correct IDs)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># DELETE (local-only; `data/*` is gitignored and not committed)</span>
rm<span class="w"> </span>data/paper_splits/paper_split_train.csv
rm<span class="w"> </span>data/paper_splits/paper_split_val.csv
rm<span class="w"> </span>data/paper_splits/paper_split_test.csv
rm<span class="w"> </span>data/paper_splits/paper_split_metadata.json
</code></pre></div>
<h3 id="32-embeddings-regenerate-from-correct-train">3.2 Embeddings (Regenerate from correct TRAIN)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># DELETE (local-only; `data/*` is gitignored and not committed)</span>
rm<span class="w"> </span>data/embeddings/paper_reference_embeddings.npz
rm<span class="w"> </span>data/embeddings/paper_reference_embeddings.json
rm<span class="w"> </span>-f<span class="w"> </span>data/embeddings/paper_reference_embeddings.meta.json
</code></pre></div>
<p><strong>Do not delete</strong>: <code>data/embeddings/reference_embeddings.*</code> (AVEC-train knowledge base), if present.</p>
<p><strong>Note</strong>: The current legacy embeddings have no <code>.meta.json</code>, but regeneration via <code>scripts/generate_embeddings.py</code> will create one.</p>
<hr />
<h2 id="4-scripts-to-modify">4. Scripts to MODIFY</h2>
<h3 id="41-scriptscreate_paper_splitpy">4.1 <code>scripts/create_paper_split.py</code></h3>
<p><strong>Current behavior</strong>: Algorithmic stratification with seed=42
<strong>New behavior</strong>: Default to <strong>paper ground truth</strong> IDs from <code>docs/data/paper-split-registry.md</code>, while retaining the existing algorithmic implementation as an explicit opt-in mode.</p>
<h4 id="design-decision-hardcode-vs-external-file">Design Decision: Hardcode vs External File</h4>
<table>
<thead>
<tr>
<th>Option</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hardcode IDs in script</strong></td>
<td>Single source of truth in code, no external dependency</td>
<td>IDs duplicated (also in paper-split-registry.md)</td>
</tr>
<tr>
<td><strong>Read from paper-split-registry.md</strong></td>
<td>Single source of truth, DRY</td>
<td>Fragile parsing of markdown</td>
</tr>
<tr>
<td><strong>New JSON file for IDs</strong></td>
<td>Clean separation, easy to validate</td>
<td>Yet another file</td>
</tr>
</tbody>
</table>
<p><strong>Decision</strong>: <strong>Hardcode IDs in script</strong>, but add an automated check that the hardcoded lists exactly match <code>docs/data/paper-split-registry.md</code>. This keeps the markdown registry as the human-readable source of truth while guaranteeing the script cannot silently drift.</p>
<h4 id="changes-required">Changes Required</h4>
<ol>
<li>Add constant lists: <code>_GROUND_TRUTH_TRAIN_IDS</code>, <code>_GROUND_TRUTH_VAL_IDS</code>, <code>_GROUND_TRUTH_TEST_IDS</code> (must match <code>docs/data/paper-split-registry.md</code>)</li>
<li>Keep <code>stratified_split()</code> for algorithmic “paper-style” generation (do not delete; tests cover this behavior)</li>
<li>Add a selection mode:</li>
<li><code>--mode ground-truth</code> (default): use the hardcoded ground truth IDs</li>
<li><code>--mode algorithmic</code>: run the existing stratified algorithm</li>
<li>Keep <code>--seed</code> but scope it to <code>--mode algorithmic</code> (error or warn if provided with ground-truth mode)</li>
<li>Add <code>--verify</code> flag that checks:</li>
<li>split sizes are 58/43/41 and total is 142</li>
<li>no overlaps between splits</li>
<li>all IDs exist in AVEC train+dev CSVs</li>
<li>all IDs have transcript directories under <code>data/transcripts/{ID}_P/</code></li>
<li>Update <code>paper_split_metadata.json</code> schema to reflect mode:</li>
<li>ground-truth mode: provenance points to <code>docs/data/paper-split-registry.md</code> (no seed)</li>
<li>algorithmic mode: preserve current seed/methodology fields (as today)</li>
<li>Update docstrings/help text to clarify “paper ground truth” vs “paper-style algorithmic”</li>
</ol>
<h3 id="42-testsunitscriptstest_create_paper_splitpy">4.2 <code>tests/unit/scripts/test_create_paper_split.py</code></h3>
<p>This test suite currently validates the algorithmic <code>stratified_split()</code> behavior and the seed-bearing metadata output. If <code>scripts/create_paper_split.py</code> defaults to ground truth, add tests to cover the new mode without removing the existing algorithmic tests:</p>
<ul>
<li>Assert <code>--mode ground-truth</code> (or an exported helper) returns the exact ID sets from <code>docs/data/paper-split-registry.md</code></li>
<li>Assert <code>--verify</code> fails loudly on overlap/missing IDs/missing transcripts</li>
<li>Keep existing tests for <code>stratified_split(df, seed=...)</code> and <code>save_splits(..., seed=...)</code></li>
</ul>
<h3 id="43-scriptsgenerate_embeddingspy">4.3 <code>scripts/generate_embeddings.py</code></h3>
<p><strong>No changes required</strong> - This script reads from <code>paper_split_train.csv</code> which will be regenerated with correct IDs.</p>
<h3 id="44-scriptsreproduce_resultspy">4.4 <code>scripts/reproduce_results.py</code></h3>
<p><strong>No changes required</strong> - This script reads from <code>paper_split_*.csv</code> files which will be regenerated with correct IDs.</p>
<hr />
<h2 id="5-documentation-to-update-required">5. Documentation to UPDATE (Required)</h2>
<p>Fixing <code>paper_split_*.csv</code> from “paper-style seeded” → “paper ground truth” will make existing docs stale. Update these tracked docs to match the new reality:</p>
<ul>
<li><code>docs/data/artifact-namespace-registry.md</code> (remove “paper does not publish IDs” phrasing; document the two modes)</li>
<li><code>docs/data/data-splits-overview.md</code> (remove seed=42 guidance for paper reproduction; point to ground truth mode)</li>
<li><code>docs/data/daic-woz-schema.md</code> (paper_splits are no longer described as “optional paper-style seeded” only)</li>
<li><code>docs/data/critical-data-split-mismatch.md</code> (status → FIXED and note the ground truth adoption)</li>
</ul>
<hr />
<h2 id="6-namespace-and-folder-conventions">6. Namespace and Folder Conventions</h2>
<h3 id="61-current-naming-keep">6.1 Current Naming (Keep)</h3>
<p>The current naming convention is sound:</p>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Example</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>paper_</code> prefix</td>
<td><code>paper_reference_embeddings.npz</code></td>
<td>Paper-derived artifacts (legacy/compat)</td>
</tr>
<tr>
<td><code>{backend}_{model}_{split}</code></td>
<td><code>huggingface_qwen3_8b_paper_train.npz</code></td>
<td>New generator output</td>
</tr>
</tbody>
</table>
<h3 id="62-folder-structure-keep">6.2 Folder Structure (Keep)</h3>
<div class="highlight"><pre><span></span><code>data/
├── paper_splits/                    # Paper ground truth split (58/43/41)
│   ├── paper_split_train.csv        # 58 participants (ground truth IDs)
│   ├── paper_split_val.csv          # 43 participants (ground truth IDs)
│   ├── paper_split_test.csv         # 41 participants (ground truth IDs)
│   └── paper_split_metadata.json    # Provenance (ground truth source + IDs)
├── embeddings/
│   ├── paper_reference_embeddings.npz   # Legacy name (for backward compat)
│   ├── paper_reference_embeddings.json
│   └── paper_reference_embeddings.meta.json  # Provenance metadata (generated)
├── train_split_Depression_AVEC2017.csv  # Original AVEC (107)
├── dev_split_Depression_AVEC2017.csv    # Original AVEC (35)
└── transcripts/                         # Per-participant transcripts
</code></pre></div>
<h3 id="63-metadata-provenance">6.3 Metadata Provenance</h3>
<p>The new <code>paper_split_metadata.json</code> should indicate ground truth source:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Paper ground truth splits (reverse-engineered from output files)&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;docs/data/paper-split-registry.md&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;methodology&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;derivation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Extracted participant IDs from paper authors&#39; output files&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;train_source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;quan_gemma_zero_shot.jsonl minus TEST minus VAL&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;val_source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;quan_gemma_few_shot/VAL_analysis_output/*.jsonl&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test_source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;quan_gemma_few_shot/TEST_analysis_output/*.jsonl&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;actual_sizes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;train&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">58</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;val&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">41</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;participant_ids&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;train&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;val&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="7-implementation-steps">7. Implementation Steps</h2>
<h3 id="phase-1-script-update">Phase 1: Script Update</h3>
<ol>
<li>
<p><strong>Create branch</strong>: <code>git checkout -b fix/paper-data-splits</code></p>
</li>
<li>
<p><strong>Update <code>scripts/create_paper_split.py</code></strong>:</p>
</li>
<li>Add ground truth ID constants</li>
<li>Add <code>--mode</code> (default ground truth, optional algorithmic)</li>
<li>Add <code>--verify</code> flag for validation</li>
<li>Keep algorithmic implementation for optional use + tests</li>
<li>
<p>Update metadata schema + help text/docstrings</p>
</li>
<li>
<p><strong>Verify the script works</strong>:
   <div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>scripts/create_paper_split.py<span class="w"> </span>--mode<span class="w"> </span>ground-truth<span class="w"> </span>--dry-run<span class="w"> </span>--verify
</code></pre></div></p>
</li>
</ol>
<h3 id="phase-2-delete-wrong-artifacts">Phase 2: Delete Wrong Artifacts</h3>
<ol>
<li>
<p><strong>Delete wrong paper splits</strong>:
   <div class="highlight"><pre><span></span><code>rm<span class="w"> </span>data/paper_splits/paper_split_*.csv
rm<span class="w"> </span>data/paper_splits/paper_split_metadata.json
</code></pre></div></p>
</li>
<li>
<p><strong>Delete wrong embeddings</strong>:
   <div class="highlight"><pre><span></span><code>rm<span class="w"> </span>data/embeddings/paper_reference_embeddings.npz
rm<span class="w"> </span>data/embeddings/paper_reference_embeddings.json
rm<span class="w"> </span>-f<span class="w"> </span>data/embeddings/paper_reference_embeddings.meta.json
</code></pre></div></p>
</li>
</ol>
<h3 id="phase-3-regenerate-correct-artifacts">Phase 3: Regenerate Correct Artifacts</h3>
<ol>
<li>
<p><strong>Generate correct splits</strong>:
   <div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>scripts/create_paper_split.py<span class="w"> </span>--mode<span class="w"> </span>ground-truth<span class="w"> </span>--verify
</code></pre></div></p>
</li>
<li>
<p><strong>Verify split correctness</strong>:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># Fail-fast: compare generated CSVs to docs/data/paper-split-registry.md</span>
uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;&#39;PY&#39;</span>
<span class="s">import hashlib</span>
<span class="s">import re</span>
<span class="s">from pathlib import Path</span>

<span class="s">import pandas as pd</span>

<span class="s"># Parse registry IDs from the first ```text blocks.</span>
<span class="s">text = Path(&quot;docs/data/paper-split-registry.md&quot;).read_text().splitlines()</span>
<span class="s">ids_by_section = {}</span>
<span class="s">section = None</span>
<span class="s">in_code = False</span>
<span class="s">buf = []</span>
<span class="s">for line in text:</span>
<span class="s">    if line.startswith(&quot;## &quot;):</span>
<span class="s">        if line.startswith(&quot;## TRAIN&quot;):</span>
<span class="s">            section = &quot;train&quot;</span>
<span class="s">        elif line.startswith(&quot;## VAL&quot;):</span>
<span class="s">            section = &quot;val&quot;</span>
<span class="s">        elif line.startswith(&quot;## TEST&quot;):</span>
<span class="s">            section = &quot;test&quot;</span>
<span class="s">        else:</span>
<span class="s">            section = None</span>
<span class="s">    if section and line.strip().startswith(&quot;```text&quot;):</span>
<span class="s">        in_code = True</span>
<span class="s">        buf = []</span>
<span class="s">        continue</span>
<span class="s">    if in_code and line.strip().startswith(&quot;```&quot;):</span>
<span class="s">        ids_by_section[section] = [int(x) for x in re.findall(r&quot;\b\d+\b&quot;, &quot;\n&quot;.join(buf))]</span>
<span class="s">        in_code = False</span>
<span class="s">        continue</span>
<span class="s">    if in_code:</span>
<span class="s">        buf.append(line)</span>

<span class="s">registry = {k: set(v) for k, v in ids_by_section.items()}</span>

<span class="s">required_cols = {</span>
<span class="s">    &quot;Participant_ID&quot;,</span>
<span class="s">    &quot;PHQ8_NoInterest&quot;,</span>
<span class="s">    &quot;PHQ8_Depressed&quot;,</span>
<span class="s">    &quot;PHQ8_Sleep&quot;,</span>
<span class="s">    &quot;PHQ8_Tired&quot;,</span>
<span class="s">    &quot;PHQ8_Appetite&quot;,</span>
<span class="s">    &quot;PHQ8_Failure&quot;,</span>
<span class="s">    &quot;PHQ8_Concentrating&quot;,</span>
<span class="s">    &quot;PHQ8_Moving&quot;,</span>
<span class="s">}</span>

<span class="s">current = {}</span>
<span class="s">for split in [&quot;train&quot;, &quot;val&quot;, &quot;test&quot;]:</span>
<span class="s">    df = pd.read_csv(f&quot;data/paper_splits/paper_split_{split}.csv&quot;)</span>
<span class="s">    missing_cols = sorted(required_cols - set(df.columns))</span>
<span class="s">    assert not missing_cols, f&quot;paper_split_{split}.csv missing columns: {missing_cols}&quot;</span>
<span class="s">    current[split] = set(df[&quot;Participant_ID&quot;].astype(int))</span>

<span class="s"># Basic invariants</span>
<span class="s">assert len(registry[&quot;train&quot;]) == 58</span>
<span class="s">assert len(registry[&quot;val&quot;]) == 43</span>
<span class="s">assert len(registry[&quot;test&quot;]) == 41</span>
<span class="s">all_registry = registry[&quot;train&quot;] | registry[&quot;val&quot;] | registry[&quot;test&quot;]</span>
<span class="s">assert len(all_registry) == 142</span>
<span class="s">assert not (registry[&quot;train&quot;] &amp; registry[&quot;val&quot;])</span>
<span class="s">assert not (registry[&quot;train&quot;] &amp; registry[&quot;test&quot;])</span>
<span class="s">assert not (registry[&quot;val&quot;] &amp; registry[&quot;test&quot;])</span>

<span class="s"># Exact match</span>
<span class="s">for split in [&quot;train&quot;, &quot;val&quot;, &quot;test&quot;]:</span>
<span class="s">    ours = current[split]</span>
<span class="s">    reg = registry[split]</span>
<span class="s">    if ours != reg:</span>
<span class="s">        raise SystemExit(</span>
<span class="s">            f&quot;Split mismatch: {split}\\n&quot;</span>
<span class="s">            f&quot;  ours-not-reg: {sorted(ours - reg)[:20]}\\n&quot;</span>
<span class="s">            f&quot;  reg-not-ours: {sorted(reg - ours)[:20]}&quot;</span>
<span class="s">        )</span>

<span class="s"># Cross-check against AVEC2017 train+dev (must be exactly the same 142 participants).</span>
<span class="s">avec_train = set(</span>
<span class="s">    pd.read_csv(&quot;data/train_split_Depression_AVEC2017.csv&quot;)[&quot;Participant_ID&quot;].astype(int)</span>
<span class="s">)</span>
<span class="s">avec_dev = set(pd.read_csv(&quot;data/dev_split_Depression_AVEC2017.csv&quot;)[&quot;Participant_ID&quot;].astype(int))</span>
<span class="s">assert not (avec_train &amp; avec_dev)</span>
<span class="s">avec_labeled = avec_train | avec_dev</span>
<span class="s">assert all_registry == avec_labeled, &quot;Registry IDs must equal AVEC labeled (train+dev) IDs&quot;</span>

<span class="s"># Ensure registry does not overlap unlabeled AVEC test split.</span>
<span class="s">test_df = pd.read_csv(&quot;data/test_split_Depression_AVEC2017.csv&quot;)</span>
<span class="s">test_col = &quot;participant_ID&quot; if &quot;participant_ID&quot; in test_df.columns else &quot;Participant_ID&quot;</span>
<span class="s">avec_test = set(test_df[test_col].astype(int))</span>
<span class="s">assert not (all_registry &amp; avec_test)</span>

<span class="s"># Transcript presence for all 142 IDs</span>
<span class="s">missing = []</span>
<span class="s">for pid in sorted(all_registry):</span>
<span class="s">    if not (Path(&quot;data/transcripts&quot;) / f&quot;{pid}_P&quot;).exists():</span>
<span class="s">        missing.append(pid)</span>
<span class="s">assert not missing, f&quot;Missing transcript dirs for: {missing}&quot;</span>

<span class="s"># Hash the paper-train CSV (used by embeddings metadata)</span>
<span class="s">train_bytes = Path(&quot;data/paper_splits/paper_split_train.csv&quot;).read_bytes()</span>
<span class="s">print(&quot;paper-train CSV sha256[:12]=&quot;, hashlib.sha256(train_bytes).hexdigest()[:12])</span>
<span class="s">print(&quot;OK: CSVs match registry + AVEC + transcripts present&quot;)</span>
<span class="s">PY</span>
</code></pre></div>
<ol>
<li><strong>Generate embeddings</strong> (requires Ollama or HuggingFace):
   <div class="highlight"><pre><span></span><code><span class="c1"># Option A: Using HuggingFace (higher precision)</span>
<span class="nv">EMBEDDING_BACKEND</span><span class="o">=</span>huggingface<span class="w"> </span>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>scripts/generate_embeddings.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--split<span class="w"> </span>paper-train<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>data/embeddings/paper_reference_embeddings.npz

<span class="c1"># Option B: Using Ollama (if HuggingFace unavailable)</span>
<span class="nv">EMBEDDING_BACKEND</span><span class="o">=</span>ollama<span class="w"> </span>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>scripts/generate_embeddings.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--split<span class="w"> </span>paper-train<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>data/embeddings/paper_reference_embeddings.npz
</code></pre></div></li>
</ol>
<h3 id="phase-4-verification">Phase 4: Verification</h3>
<ol>
<li><strong>Verify embeddings artifact matches paper-train IDs (not just count)</strong>:</li>
</ol>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;&#39;PY&#39;</span>
<span class="s">import hashlib</span>
<span class="s">import json</span>
<span class="s">import re</span>
<span class="s">from pathlib import Path</span>

<span class="s">import numpy as np</span>
<span class="s">import pandas as pd</span>

<span class="s">train_ids = set(pd.read_csv(&quot;data/paper_splits/paper_split_train.csv&quot;)[&quot;Participant_ID&quot;].astype(int))</span>
<span class="s">npz_path = Path(&quot;data/embeddings/paper_reference_embeddings.npz&quot;)</span>
<span class="s">meta_path = npz_path.with_suffix(&quot;.meta.json&quot;)</span>

<span class="s">npz = np.load(npz_path, allow_pickle=False)</span>
<span class="s">try:</span>
<span class="s">    pids = {</span>
<span class="s">        int(m.group(1))</span>
<span class="s">        for k in npz.files</span>
<span class="s">        if (m := re.match(r&quot;emb_(\d+)$&quot;, k))</span>
<span class="s">    }</span>
<span class="s">finally:</span>
<span class="s">    npz.close()</span>

<span class="s">missing = sorted(train_ids - pids)</span>
<span class="s">extra = sorted(pids - train_ids)</span>
<span class="s">print(&quot;participants_in_npz&quot;, len(pids))</span>
<span class="s">print(&quot;missing_from_npz&quot;, missing)</span>
<span class="s">print(&quot;extra_in_npz&quot;, extra)</span>
<span class="s">assert not missing and not extra, &quot;NPZ participants must exactly match paper_split_train.csv&quot;</span>

<span class="s">if meta_path.exists():</span>
<span class="s">    meta = json.loads(meta_path.read_text())</span>
<span class="s">    split_hash = meta.get(&quot;split_csv_hash&quot;)</span>
<span class="s">    current_hash = hashlib.sha256(</span>
<span class="s">        Path(&quot;data/paper_splits/paper_split_train.csv&quot;).read_bytes()</span>
<span class="s">    ).hexdigest()[:12]</span>
<span class="s">    print(&quot;meta.split&quot;, meta.get(&quot;split&quot;))</span>
<span class="s">    print(&quot;meta.split_csv_hash&quot;, split_hash)</span>
<span class="s">    print(&quot;current_split_csv_hash&quot;, current_hash)</span>
<span class="s">    assert split_hash == current_hash, &quot;Metadata split hash must match current paper_split_train.csv&quot;</span>

<span class="s">print(&quot;OK: embeddings match paper-train IDs (+ metadata hash if present)&quot;)</span>
<span class="s">PY</span>
</code></pre></div>
<ol>
<li>
<p><strong>Run tests</strong>:
    <div class="highlight"><pre><span></span><code>make<span class="w"> </span>test-unit
</code></pre></div></p>
</li>
<li>
<p><strong>Optional: Run reproduction</strong> (requires Ollama running):
    <div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>scripts/reproduce_results.py<span class="w"> </span>--split<span class="w"> </span>paper<span class="w"> </span>--limit<span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="phase-5-commit-and-pr">Phase 5: Commit and PR</h3>
<ol>
<li>
<p><strong>Commit changes</strong>:
    <div class="highlight"><pre><span></span><code><span class="c1"># DO NOT commit `data/*` (gitignored due to licensing).</span>
git<span class="w"> </span>add<span class="w"> </span>scripts/create_paper_split.py
git<span class="w"> </span>add<span class="w"> </span>tests/unit/scripts/test_create_paper_split.py
git<span class="w"> </span>add<span class="w"> </span>docs/data/paper-split-registry.md
git<span class="w"> </span>add<span class="w"> </span>docs/data/artifact-namespace-registry.md
git<span class="w"> </span>add<span class="w"> </span>docs/data/data-splits-overview.md
git<span class="w"> </span>add<span class="w"> </span>docs/data/daic-woz-schema.md
git<span class="w"> </span>add<span class="w"> </span>docs/data/critical-data-split-mismatch.md
git<span class="w"> </span>add<span class="w"> </span>docs/data/spec-data-split-fix.md
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;fix(data-splits): adopt paper ground truth IDs (GH-45)&quot;</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Create PR</strong>:
    <div class="highlight"><pre><span></span><code>gh<span class="w"> </span>pr<span class="w"> </span>create<span class="w"> </span>--title<span class="w"> </span><span class="s2">&quot;fix: correct paper split participant IDs&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--body<span class="w"> </span><span class="s2">&quot;Fixes #45. Uses ground truth IDs from paper-split-registry.md instead of algorithmic generation.&quot;</span>
</code></pre></div></p>
</li>
</ol>
<hr />
<h2 id="8-post-fix-verification-checklist">8. Post-Fix Verification Checklist</h2>
<table>
<thead>
<tr>
<th>Check</th>
<th>Command</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr>
<td>TRAIN count</td>
<td><code>wc -l data/paper_splits/paper_split_train.csv</code></td>
<td>59 (58 + header)</td>
</tr>
<tr>
<td>VAL count</td>
<td><code>wc -l data/paper_splits/paper_split_val.csv</code></td>
<td>44 (43 + header)</td>
</tr>
<tr>
<td>TEST count</td>
<td><code>wc -l data/paper_splits/paper_split_test.csv</code></td>
<td>42 (41 + header)</td>
</tr>
<tr>
<td>CSVs match registry</td>
<td><code>uv run python - &lt;&lt;'PY' ... PY</code> (see Phase 3.7)</td>
<td>Exact match</td>
</tr>
<tr>
<td>Transcripts present</td>
<td>Included in Phase 3.7 script</td>
<td>0 missing</td>
</tr>
<tr>
<td>Embeddings participants</td>
<td><code>uv run python - &lt;&lt;'PY' ... PY</code> (see Phase 4.9)</td>
<td>Exact match</td>
</tr>
<tr>
<td>Tests pass</td>
<td><code>make test-unit</code></td>
<td>All green</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9-risks-and-mitigations">9. Risks and Mitigations</h2>
<table>
<thead>
<tr>
<th>Risk</th>
<th>Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Wrong IDs in paper-split-registry.md</td>
<td>Double-check extraction logic; IDs verified against 7+ output files</td>
</tr>
<tr>
<td>Accidentally committing DAIC-WOZ-derived data</td>
<td>Keep <code>data/*</code> gitignored; do not add exceptions; commit only code/docs</td>
</tr>
<tr>
<td>Embeddings not gitignored</td>
<td>Verify <code>.gitignore</code> excludes <code>data/*</code> (includes embeddings + split CSVs)</td>
</tr>
<tr>
<td>Breaking existing workflows</td>
<td>Legacy <code>paper_reference_embeddings.*</code> filename preserved via <code>--output</code></td>
</tr>
<tr>
<td>Circular dependency (script needs data, data needs script)</td>
<td>AVEC CSVs are independent; script only filters them</td>
</tr>
<tr>
<td>Silent mismatch: new splits, old embeddings</td>
<td>Require Phase 4.9 equality check (IDs + split hash); regenerate embeddings after split fix</td>
</tr>
<tr>
<td>Docs drift (“paper-style seeded” language becomes false)</td>
<td>Update docs in Section 5 (required) and add acceptance criteria</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="10-files-modified-summary">10. Files Modified Summary</h2>
<table>
<thead>
<tr>
<th>File</th>
<th>Action</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scripts/create_paper_split.py</code></td>
<td>MODIFY</td>
<td>Use ground truth IDs</td>
</tr>
<tr>
<td><code>tests/unit/scripts/test_create_paper_split.py</code></td>
<td>MODIFY</td>
<td>Cover ground truth mode; keep algorithmic tests</td>
</tr>
<tr>
<td><code>docs/data/artifact-namespace-registry.md</code></td>
<td>MODIFY</td>
<td>Remove stale “paper-style seeded” claims</td>
</tr>
<tr>
<td><code>docs/data/data-splits-overview.md</code></td>
<td>MODIFY</td>
<td>Align reproduction guidance with ground truth mode</td>
</tr>
<tr>
<td><code>docs/data/daic-woz-schema.md</code></td>
<td>MODIFY</td>
<td>Align dataset docs with ground truth paper split</td>
</tr>
<tr>
<td><code>docs/data/critical-data-split-mismatch.md</code></td>
<td>MODIFY</td>
<td>Update status to FIXED after implementation</td>
</tr>
<tr>
<td><code>data/paper_splits/paper_split_*.csv</code></td>
<td>DELETE + REGENERATE (local-only)</td>
<td>Wrong IDs (gitignored)</td>
</tr>
<tr>
<td><code>data/paper_splits/paper_split_metadata.json</code></td>
<td>DELETE + REGENERATE (local-only)</td>
<td>Wrong IDs (gitignored)</td>
</tr>
<tr>
<td><code>data/embeddings/paper_reference_embeddings.*</code></td>
<td>DELETE + REGENERATE (local-only)</td>
<td>Generated from wrong TRAIN split (gitignored)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="11-acceptance-criteria">11. Acceptance Criteria</h2>
<ul>
<li>[ ] <code>scripts/create_paper_split.py</code> defaults to ground truth IDs and supports algorithmic mode explicitly</li>
<li>[ ] Hardcoded ID lists are verified (test) to match <code>docs/data/paper-split-registry.md</code></li>
<li>[ ] <code>data/paper_splits/paper_split_train.csv</code> contains exactly 58 correct participant IDs</li>
<li>[ ] <code>data/paper_splits/paper_split_val.csv</code> contains exactly 43 correct participant IDs</li>
<li>[ ] <code>data/paper_splits/paper_split_test.csv</code> contains exactly 41 correct participant IDs</li>
<li>[ ] All IDs match those in <code>docs/data/paper-split-registry.md</code></li>
<li>[ ] All 142 IDs have transcript directories under <code>data/transcripts/{ID}_P/</code></li>
<li>[ ] Embeddings regenerated from correct TRAIN split and validated against <code>paper_split_train.csv</code> (exact IDs, not just count)</li>
<li>[ ] <code>docs/data/critical-data-split-mismatch.md</code> updated to status FIXED</li>
<li>[ ] Docs in Section 5 updated to remove “paper-style seeded” ambiguity</li>
<li>[ ] All unit tests pass</li>
<li>[ ] GitHub Issue #45 closed</li>
</ul>
<hr />
<h2 id="12-related-documentation">12. Related Documentation</h2>
<table>
<thead>
<tr>
<th>Document</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docs/data/paper-split-registry.md</code></td>
<td>Ground truth split IDs</td>
</tr>
<tr>
<td><code>docs/data/critical-data-split-mismatch.md</code></td>
<td>Problem discovery and evidence</td>
</tr>
<tr>
<td><code>docs/data/artifact-namespace-registry.md</code></td>
<td>Naming conventions</td>
</tr>
<tr>
<td><code>docs/data/daic-woz-schema.md</code></td>
<td>Dataset schema reference</td>
</tr>
</tbody>
</table>
<hr />
<p><em>Spec Author: Claude Code</em>
<em>Date: 2025-12-25</em>
<em>Reviewed and approved: 2025-12-25</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.copy", "content.action.edit", "content.action.view", "navigation.tracking", "navigation.sections", "navigation.footer", "navigation.instant"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>