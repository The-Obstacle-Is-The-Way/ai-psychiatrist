
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://the-obstacle-is-the-way.github.io/ai-psychiatrist/_archive/specs/01_PROJECT_BOOTSTRAP/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Spec 01: Project Bootstrap - AI Psychiatrist</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spec-01-project-bootstrap" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AI Psychiatrist" class="md-header__button md-logo" aria-label="AI Psychiatrist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI Psychiatrist
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spec 01: Project Bootstrap
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AI Psychiatrist" class="md-nav__button md-logo" aria-label="AI Psychiatrist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AI Psychiatrist
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Psychiatrist Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
     research
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
     research
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../_research/hypotheses-explained/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypotheses Explained: Current State vs Future Improvements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../_research/hypotheses-for-improvement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypotheses for Improvement: First-Principles Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../_research/master-bug-audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MASTER BUG AUDIT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/future-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Future Architecture: Agent Orchestration Options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Clinical
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clinical
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/clinical-understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clinical Understanding: How This System Works
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/phq8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PHQ-8: Patient Health Questionnaire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clinical/task-validity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Validity: What Can (and Cannot) Be Inferred from DAIC-WOZ Transcripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Configs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../configs/agent-sampling-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Sampling Parameter Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../configs/configuration-philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../configs/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/artifact-namespace-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Artifact Namespace Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/daic-woz-preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DAIC-WOZ Transcript Preprocessing (Bias-Aware, Deterministic)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/daic-woz-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DAIC-WOZ Dataset Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/data-splits-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Splits Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/api-endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/dependency-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependency Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/error-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Fail-Fast Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exception Reference (Domain + Runtime)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Conventions (Markers, Fixtures, and Test Doubles)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Psychiatrist Model Registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-wiring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Wiring: Current State
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pipeline internals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pipeline internals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pipeline-internals/evidence-extraction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evidence Extraction Mechanism: How It Actually Works
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pipeline-internals/features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Reference (Non-Archive Canonical)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Preflight checklist
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Preflight checklist
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../preflight-checklist/preflight-checklist-few-shot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preflight Checklist: Few-Shot Reproduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../preflight-checklist/preflight-checklist-zero-shot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preflight Checklist: Zero-Shot Run
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Rag
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rag
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/artifact-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Artifact Generation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/chunk-scoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunk-Level Scoring (Spec 35) â€” Schema, Workflow, and Gotchas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Debugging (Audit Logs + Guardrails)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/design-rationale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Design Rationale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Overview: Embeddings and Few-Shot Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rag/runtime-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG Runtime Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Results
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/few-shot-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Why Few-Shot May Not Beat Zero-Shot: Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/reproduction-results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Paper Reproduction Results (Current Status)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/run-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete Run History &amp; Statistical Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/run-output-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reproduction Run Output Schema (JSON + Registry)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Statistics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    Statistics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../statistics/coverage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coverage Explained: What It Is and Why It Matters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../statistics/metrics-and-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics and Evaluation (Exact Definitions + Output Schema)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../statistics/statistical-methodology-aurc-augrc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Statistical Methodology: AURC/AUGRC for Selective Prediction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objective
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Philosophy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Philosophy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-test-real-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        What to Test (Real Behavior)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-mocking-is-acceptable" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Mocking is Acceptable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-mocking-is-forbidden" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Mocking is FORBIDDEN
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-data-vs-mocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Data vs Mocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-testing-ollama-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Testing Ollama Client
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#as-is-implementation-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        As-Is Implementation (Repo)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deliverables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deliverables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-project-configuration-pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Project Configuration (pyproject.toml)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-makefile" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Makefile
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables-as-is-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables (As-Is + Target)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Variables (As-Is + Target)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#as-is-used-by-current-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        As-Is (Used by Current Repo)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpc-slurm-configured-in-slurmjob_ollamash" class="md-nav__link">
    <span class="md-ellipsis">
      
        HPC / SLURM (Configured in slurm/job_ollama.sh)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Directory Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-package-init-srcai_psychiatristinitpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Package Init (src/ai_psychiatrist/init.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-test-configuration-testsconftestpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Test Configuration (tests/conftest.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-cicd-pipeline-githubworkflowsciyml" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. CI/CD Pipeline (.github/workflows/ci.yml)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-pre-commit-configuration-pre-commit-configyaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Pre-commit Configuration (.pre-commit-config.yaml)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-environment-template-envexample" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Environment Template (.env.example)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acceptance-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      
        Acceptance Criteria
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Acceptance Criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tests-testsunittest_bootstrappy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tests (tests/unit/test_bootstrap.py)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Notes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-old-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        From Old Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#breaking-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Breaking Changes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verification Steps
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-on-other-specs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependencies on Other Specs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specs-that-depend-on-this" class="md-nav__link">
    <span class="md-ellipsis">
      
        Specs That Depend on This
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist/edit/main/docs/_archive/specs/01_PROJECT_BOOTSTRAP.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist/raw/main/docs/_archive/specs/01_PROJECT_BOOTSTRAP.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="spec-01-project-bootstrap">Spec 01: Project Bootstrap</h1>
<h2 id="objective">Objective</h2>
<p>Establish modern Python project structure with uv, Ruff, pytest, and Makefile automation. This is the foundation for all subsequent specs.</p>
<h2 id="testing-philosophy">Testing Philosophy</h2>
<p><strong>CRITICAL: No Mock Abuse</strong></p>
<p>This codebase follows a strict testing philosophy to avoid the "mock everything" anti-pattern:</p>
<h3 id="what-to-test-real-behavior">What to Test (Real Behavior)</h3>
<ul>
<li><strong>Unit tests</strong>: Test pure functions, data transformations, validation logic with REAL inputs</li>
<li><strong>Integration tests</strong>: Test component interactions with REAL dependencies where possible</li>
<li><strong>E2E tests</strong>: Test full pipeline with REAL Ollama (can use smaller/faster models for CI)</li>
</ul>
<h3 id="when-mocking-is-acceptable">When Mocking is Acceptable</h3>
<p>Only mock at <strong>external I/O boundaries</strong> that would make tests slow, flaky, or require external services:
- HTTP calls to Ollama API (mock the HTTP layer, not the client logic)
- File system operations for tests that shouldn't touch disk
- Time-dependent operations (sparingly; prefer injecting clocks)</p>
<h3 id="when-mocking-is-forbidden">When Mocking is FORBIDDEN</h3>
<ul>
<li><strong>Never mock business logic</strong> - if you need to mock it, your design is wrong</li>
<li><strong>Never mock to make tests pass</strong> - fix the code, not the test</li>
<li><strong>Never mock domain models</strong> - use real instances with test data</li>
<li><strong>Never mock internal functions</strong> - test them directly or through public API</li>
</ul>
<h3 id="test-data-vs-mocks">Test Data vs Mocks</h3>
<ul>
<li><strong>Test data fixtures</strong> (<code>sample_transcript</code>, <code>sample_phq8_scores</code>): GOOD - real data structures</li>
<li><strong>Response fixtures</strong> (<code>sample_ollama_response</code>): GOOD - real API response structure for parsing tests</li>
<li><strong>Mock objects that replace real behavior</strong>: BAD unless at I/O boundary</li>
</ul>
<h3 id="example-testing-ollama-client">Example: Testing Ollama Client</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># GOOD: Mock HTTP, test real client logic</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_httpx_client</span><span class="p">(</span><span class="n">sample_ollama_response</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">respx</span><span class="o">.</span><span class="n">mock</span><span class="p">:</span>
        <span class="n">respx</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://localhost:11434/api/chat&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">json</span><span class="o">=</span><span class="n">sample_ollama_response</span><span class="p">)</span>
        <span class="k">yield</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_ollama_client_parses_response</span><span class="p">(</span><span class="n">mock_httpx_client</span><span class="p">):</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">OllamaClient</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:11434&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">messages</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">])</span>  <span class="c1"># Real client, mocked HTTP</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">content</span> <span class="o">==</span> <span class="s2">&quot;...&quot;</span>  <span class="c1"># Test real parsing logic</span>

<span class="c1"># BAD: Mocking the client itself</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">unittest</span><span class="w"> </span><span class="kn">import</span> <span class="n">mock</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_bad_mock_everything</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">mock_client</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">()</span>  <span class="c1"># NEVER DO THIS</span>
    <span class="n">mock_client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="s2">&quot;whatever&quot;</span>  <span class="c1"># Tests nothing real</span>
</code></pre></div>
<h2 id="as-is-implementation-repo">As-Is Implementation (Repo)</h2>
<p>This repository now contains the <code>uv</code>/<code>pyproject.toml</code> bootstrap defined in this spec <strong>alongside</strong> the original research code. The legacy research execution path is primarily driven by:</p>
<ul>
<li>Conda environment file: <code>assets/env_reqs.yml</code></li>
<li>HPC execution: <code>slurm/job_ollama.sh</code>, <code>slurm/job_assess.sh</code></li>
<li>Local demo server: <code>server.py</code> (requires an Ollama daemon + a transcript file via <code>TRANSCRIPT_PATH</code>)</li>
</ul>
<p>The production rewrite should live under <code>src/ai_psychiatrist/</code> and incrementally replace the legacy scripts while preserving paper parity.</p>
<h2 id="deliverables">Deliverables</h2>
<ol>
<li><code>pyproject.toml</code> - Single source of truth for project config</li>
<li><code>uv.lock</code> - Locked dependencies for reproducibility</li>
<li><code>Makefile</code> - Developer workflow automation</li>
<li><code>.github/workflows/ci.yml</code> - CI/CD pipeline</li>
<li><code>.pre-commit-config.yaml</code> - Local developer guardrails</li>
<li><code>.env.example</code> - Paper-optimal configuration template</li>
<li><code>src/ai_psychiatrist/__init__.py</code> - Package skeleton</li>
<li><code>src/ai_psychiatrist/cli.py</code> - CLI entry point</li>
<li><code>tests/conftest.py</code> - pytest fixtures</li>
<li><code>tests/unit/test_bootstrap.py</code> - Bootstrap tests</li>
<li><code>tests/unit/test_cli.py</code> - CLI smoke test</li>
</ol>
<h2 id="implementation">Implementation</h2>
<h3 id="1-project-configuration-pyprojecttoml">1. Project Configuration (pyproject.toml)</h3>
<div class="highlight"><pre><span></span><code><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ai-psychiatrist&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2.0.0&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;LLM-based Multi-Agent System for Depression Assessment&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;MIT&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.11&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;TReNDS Center&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;vcalhoun@gsu.edu&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
<span class="n">classifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;Development Status :: 4 - Beta&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Intended Audience :: Healthcare Industry&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Intended Audience :: Science/Research&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;License :: OSI Approved :: MIT License&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Programming Language :: Python :: 3.11&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Programming Language :: Python :: 3.12&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Topic :: Scientific/Engineering :: Artificial Intelligence&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Topic :: Scientific/Engineering :: Medical Science Apps.&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">keywords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mental-health&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;depression&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;phq-8&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;multi-agent&quot;</span><span class="p">]</span>

<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;fastapi&gt;=0.124.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;uvicorn[standard]&gt;=0.38.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pydantic&gt;=2.12.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pydantic-settings&gt;=2.12.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;httpx&gt;=0.28.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;structlog&gt;=25.5.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;orjson&gt;=3.11.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pandas&gt;=2.3.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;numpy&gt;=2.3.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;scikit-learn&gt;=1.8.0&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project.optional-dependencies]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pytest&gt;=9.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pytest-cov&gt;=7.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pytest-asyncio&gt;=1.3.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pytest-xdist&gt;=3.8.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;hypothesis&gt;=6.148.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;mypy&gt;=1.19.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;ruff&gt;=0.14.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pre-commit&gt;=4.5.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;respx&gt;=0.22.0&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># httpx mocking</span>
<span class="p">]</span>
<span class="n">docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;mkdocs&gt;=1.6.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;mkdocs-material&gt;=9.5.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;mkdocstrings[python]&gt;=0.27.0&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project.scripts]</span>
<span class="n">ai-psychiatrist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ai_psychiatrist.cli:main&quot;</span>

<span class="k">[project.urls]</span>
<span class="n">Homepage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist&quot;</span>
<span class="n">Documentation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist&quot;</span>
<span class="n">Repository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist&quot;</span>
<span class="n">Issues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/The-Obstacle-Is-The-Way/ai-psychiatrist/issues&quot;</span>

<span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hatchling&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hatchling.build&quot;</span>

<span class="k">[tool.hatch.build.targets.wheel]</span>
<span class="n">packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src/ai_psychiatrist&quot;</span><span class="p">]</span>

<span class="c1"># ============== RUFF ==============</span>
<span class="k">[tool.ruff]</span>
<span class="n">target-version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;py311&quot;</span>
<span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span>
<span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tests&quot;</span><span class="p">]</span>

<span class="k">[tool.ruff.lint]</span>
<span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;E&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1"># pycodestyle errors</span>
<span class="w">    </span><span class="s2">&quot;W&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1"># pycodestyle warnings</span>
<span class="w">    </span><span class="s2">&quot;F&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1"># pyflakes</span>
<span class="w">    </span><span class="s2">&quot;I&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1"># isort</span>
<span class="w">    </span><span class="s2">&quot;B&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1"># flake8-bugbear</span>
<span class="w">    </span><span class="s2">&quot;C4&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># flake8-comprehensions</span>
<span class="w">    </span><span class="s2">&quot;UP&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># pyupgrade</span>
<span class="w">    </span><span class="s2">&quot;ARG&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># flake8-unused-arguments</span>
<span class="w">    </span><span class="s2">&quot;SIM&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># flake8-simplify</span>
<span class="w">    </span><span class="s2">&quot;TCH&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># flake8-type-checking</span>
<span class="w">    </span><span class="s2">&quot;PTH&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># flake8-use-pathlib</span>
<span class="w">    </span><span class="s2">&quot;ERA&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># eradicate (commented code)</span>
<span class="w">    </span><span class="s2">&quot;PL&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># pylint</span>
<span class="w">    </span><span class="s2">&quot;RUF&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># ruff-specific</span>
<span class="p">]</span>
<span class="n">ignore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;PLR0913&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># Too many arguments (agents need many params)</span>
<span class="w">    </span><span class="s2">&quot;PLR2004&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># Magic value comparison</span>
<span class="p">]</span>

<span class="k">[tool.ruff.lint.isort]</span>
<span class="n">known-first-party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;ai_psychiatrist&quot;</span><span class="p">]</span>

<span class="k">[tool.ruff.lint.per-file-ignores]</span>
<span class="s2">&quot;tests/**/*.py&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;S101&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ARG001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;PLR2004&quot;</span><span class="p">]</span>

<span class="c1"># ============== PYTEST ==============</span>
<span class="k">[tool.pytest.ini_options]</span>
<span class="n">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;tests&quot;</span><span class="p">]</span>
<span class="n">pythonpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span>
<span class="n">asyncio_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;auto&quot;</span>
<span class="n">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;--strict-markers&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;--strict-config&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;-ra&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;--cov=ai_psychiatrist&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;--cov-report=term-missing&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;--cov-report=html:htmlcov&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;--cov-fail-under=80&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">markers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;unit: Unit tests (fast, no I/O)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;integration: Integration tests (may use mocks)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;e2e: End-to-end tests (full system)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;slow: Slow tests (skip with -m &#39;not slow&#39;)&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># ============== MYPY ==============</span>
<span class="k">[tool.mypy]</span>
<span class="n">python_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;3.11&quot;</span>
<span class="n">strict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_return_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_unused_configs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">disallow_untyped_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">disallow_incomplete_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">check_untyped_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">disallow_untyped_decorators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">no_implicit_optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_redundant_casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_unused_ignores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_no_return</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">follow_imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;silent&quot;</span>
<span class="n">ignore_missing_imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="k">[[tool.mypy.overrides]]</span>
<span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pandas.*&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;sklearn.*&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;numpy.*&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">ignore_missing_imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="c1"># ============== COVERAGE ==============</span>
<span class="k">[tool.coverage.run]</span>
<span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src/ai_psychiatrist&quot;</span><span class="p">]</span>
<span class="n">omit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;*/tests/*&quot;</span><span class="p">]</span>

<span class="k">[tool.coverage.report]</span>
<span class="n">exclude_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pragma: no cover&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;def __repr__&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;raise NotImplementedError&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;if TYPE_CHECKING:&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;if __name__ == .__main__.:&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<h3 id="2-makefile">2. Makefile</h3>
<div class="highlight"><pre><span></span><code><span class="nf">.PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">help</span> <span class="n">install</span> <span class="n">dev</span> <span class="n">test</span> <span class="n">lint</span> <span class="n">format</span> <span class="n">typecheck</span> <span class="n">clean</span> <span class="n">docs</span> <span class="n">serve</span>

<span class="c"># Self-documenting help</span>
<span class="nf">help</span><span class="o">:</span><span class="w"> </span><span class="c">## Show this help message</span>
<span class="w">    </span>@grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^[a-zA-Z_-]+:.*?## .*$$&#39;</span><span class="w"> </span><span class="k">$(</span>MAKEFILE_LIST<span class="k">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;BEGIN {FS = &quot;:.*?## &quot;}; {printf &quot;\033[36m%-20s\033[0m %s\n&quot;, $$1, $$2}&#39;</span>

<span class="c"># ============== Setup ==============</span>
<span class="nf">install</span><span class="o">:</span><span class="w"> </span><span class="c">## Install production dependencies</span>
<span class="w">    </span>uv<span class="w"> </span>sync<span class="w"> </span>--no-dev

<span class="nf">dev</span><span class="o">:</span><span class="w"> </span><span class="c">## Install all dependencies (including dev)</span>
<span class="w">    </span>uv<span class="w"> </span>sync<span class="w"> </span>--all-extras
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pre-commit<span class="w"> </span>install

<span class="c"># ============== Testing ==============</span>
<span class="nf">test</span><span class="o">:</span><span class="w"> </span><span class="c">## Run all tests with coverage</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pytest

<span class="nf">test-unit</span><span class="o">:</span><span class="w"> </span><span class="c">## Run unit tests only</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>-m<span class="w"> </span>unit

<span class="nf">test-integration</span><span class="o">:</span><span class="w"> </span><span class="c">## Run integration tests only</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>-m<span class="w"> </span>integration

<span class="nf">test-e2e</span><span class="o">:</span><span class="w"> </span><span class="c">## Run end-to-end tests only</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>-m<span class="w"> </span>e2e

<span class="nf">test-fast</span><span class="o">:</span><span class="w"> </span><span class="c">## Run tests excluding slow ones</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;not slow&quot;</span>

<span class="nf">test-parallel</span><span class="o">:</span><span class="w"> </span><span class="c">## Run tests in parallel</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>-n<span class="w"> </span>auto

<span class="c"># ============== Code Quality ==============</span>
<span class="nf">lint</span><span class="o">:</span><span class="w"> </span><span class="c">## Run linter (ruff)</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>check<span class="w"> </span>src<span class="w"> </span>tests

<span class="nf">lint-fix</span><span class="o">:</span><span class="w"> </span><span class="c">## Fix linting issues automatically</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>check<span class="w"> </span>--fix<span class="w"> </span>src<span class="w"> </span>tests

<span class="nf">format</span><span class="o">:</span><span class="w"> </span><span class="c">## Format code (ruff)</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>format<span class="w"> </span>src<span class="w"> </span>tests

<span class="nf">format-check</span><span class="o">:</span><span class="w"> </span><span class="c">## Check formatting without changes</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>format<span class="w"> </span>--check<span class="w"> </span>src<span class="w"> </span>tests

<span class="nf">typecheck</span><span class="o">:</span><span class="w"> </span><span class="c">## Run type checker (mypy)</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>mypy<span class="w"> </span>src

<span class="c"># ============== All Quality Checks ==============</span>
<span class="nf">check</span><span class="o">:</span><span class="w"> </span><span class="n">lint</span> <span class="n">typecheck</span> <span class="n">test</span> <span class="c">## Run all checks (lint, typecheck, test)</span>

<span class="nf">ci</span><span class="o">:</span><span class="w"> </span><span class="n">format</span>-<span class="n">check</span> <span class="n">lint</span> <span class="n">typecheck</span> <span class="n">test</span> <span class="c">## CI pipeline checks</span>

<span class="c"># ============== Development ==============</span>
<span class="nf">serve</span><span class="o">:</span><span class="w"> </span><span class="c">## Run development server</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>uvicorn<span class="w"> </span>ai_psychiatrist.api.main:app<span class="w"> </span>--reload<span class="w"> </span>--host<span class="w"> </span><span class="m">0</span>.0.0.0<span class="w"> </span>--port<span class="w"> </span><span class="m">8000</span>

<span class="nf">repl</span><span class="o">:</span><span class="w"> </span><span class="c">## Start Python REPL with project loaded</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-i<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from ai_psychiatrist import *&quot;</span>

<span class="c"># ============== Documentation ==============</span>
<span class="nf">docs</span><span class="o">:</span><span class="w"> </span><span class="c">## Build documentation</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>mkdocs<span class="w"> </span>build

<span class="nf">docs-serve</span><span class="o">:</span><span class="w"> </span><span class="c">## Serve documentation locally</span>
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>mkdocs<span class="w"> </span>serve

<span class="c"># ============== Cleanup ==============</span>
<span class="nf">clean</span><span class="o">:</span><span class="w"> </span><span class="c">## Remove build artifacts and caches</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span>build<span class="w"> </span>dist<span class="w"> </span>*.egg-info
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span>.pytest_cache<span class="w"> </span>.mypy_cache<span class="w"> </span>.ruff_cache
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span>htmlcov<span class="w"> </span>.coverage<span class="w"> </span>coverage.xml
<span class="w">    </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span>__pycache__<span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span>+
<span class="w">    </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.pyc&quot;</span><span class="w"> </span>-delete
</code></pre></div>
<h2 id="environment-variables-as-is-target">Environment Variables (As-Is + Target)</h2>
<h3 id="as-is-used-by-current-repo">As-Is (Used by Current Repo)</h3>
<ul>
<li><code>TRANSCRIPT_PATH</code>: Read by <code>agents/interview_simulator.py</code> to locate the transcript file for <code>server.py</code>.</li>
</ul>
<h3 id="hpc-slurm-configured-in-slurmjob_ollamash">HPC / SLURM (Configured in <code>slurm/job_ollama.sh</code>)</h3>
<p>These are set in the SLURM script (not in Python) and should be documented because they materially affect Ollama behavior:</p>
<ul>
<li><code>CUDA_VISIBLE_DEVICES</code></li>
<li><code>OLLAMA_HOST_MEMORY</code></li>
<li><code>OLLAMA_KEEP_ALIVE</code></li>
<li><code>OLLAMA_MMAP</code></li>
<li><code>GGML_CUDA_FORCE_CUBLAS</code></li>
<li><code>GGML_CUDA_FORCE_MMQ</code></li>
<li><code>OLLAMA_HOST</code></li>
<li><code>OLLAMA_FLASH_ATTENTION</code></li>
<li><code>OLLAMA_MODELS</code></li>
<li><code>OLLAMA_BACKEND</code></li>
</ul>
<h3 id="3-directory-structure">3. Directory Structure</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create src layout</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>src/ai_psychiatrist/<span class="o">{</span>api,agents,domain,services,infrastructure<span class="o">}</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>tests/<span class="o">{</span>unit,integration,e2e<span class="o">}</span>

<span class="c1"># Create __init__.py files</span>
touch<span class="w"> </span>src/ai_psychiatrist/__init__.py
touch<span class="w"> </span>src/ai_psychiatrist/api/__init__.py
touch<span class="w"> </span>src/ai_psychiatrist/agents/__init__.py
touch<span class="w"> </span>src/ai_psychiatrist/domain/__init__.py
touch<span class="w"> </span>src/ai_psychiatrist/services/__init__.py
touch<span class="w"> </span>src/ai_psychiatrist/infrastructure/__init__.py
touch<span class="w"> </span>tests/__init__.py
touch<span class="w"> </span>tests/unit/__init__.py
touch<span class="w"> </span>tests/integration/__init__.py
touch<span class="w"> </span>tests/e2e/__init__.py
</code></pre></div>
<h3 id="4-package-init-srcai_psychiatristinitpy">4. Package Init (src/ai_psychiatrist/<strong>init</strong>.py)</h3>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;AI Psychiatrist: LLM-based Multi-Agent System for Depression Assessment.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">importlib.metadata</span><span class="w"> </span><span class="kn">import</span> <span class="n">PackageNotFoundError</span><span class="p">,</span> <span class="n">version</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="n">version</span><span class="p">(</span><span class="s2">&quot;ai-psychiatrist&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">PackageNotFoundError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.0.0&quot;</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;__version__&quot;</span><span class="p">]</span>
</code></pre></div>
<h3 id="5-test-configuration-testsconftestpy">5. Test Configuration (tests/conftest.py)</h3>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;Shared pytest fixtures and configuration.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generator</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sample_transcript</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a sample interview transcript for testing.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Ellie: How are you doing today?</span>
<span class="s2">    Participant: Not great, I&#39;ve been feeling really down lately.</span>
<span class="s2">    Ellie: Can you tell me more about that?</span>
<span class="s2">    Participant: I just can&#39;t seem to enjoy anything anymore.</span>
<span class="s2">    I used to love going out with friends, but now I can&#39;t be bothered.</span>
<span class="s2">    Ellie: How long has this been going on?</span>
<span class="s2">    Participant: A few months now. I&#39;m also not sleeping well.</span>
<span class="s2">    I wake up at 3 or 4 in the morning and can&#39;t get back to sleep.</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sample_phq8_scores</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return sample PHQ-8 ground truth scores.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;PHQ8_NoInterest&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Depressed&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Sleep&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Tired&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Appetite&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Failure&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Concentrating&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;PHQ8_Moving&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">}</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sample_ollama_response</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return sample Ollama API response structure for testing.</span>

<span class="sd">    NOTE: This is TEST DATA, not a mock. We use real data structures to test</span>
<span class="sd">    parsing/validation logic. Only mock external I/O boundaries (HTTP calls),</span>
<span class="sd">    never business logic.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;alibayram/medgemma:27b&quot;</span><span class="p">,</span>  <span class="c1"># Paper-optimal (Appendix F)</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;{&quot;PHQ8_NoInterest&quot;: {&quot;evidence&quot;: &quot;can</span><span class="se">\&#39;</span><span class="s1">t be bothered&quot;, &quot;score&quot;: 2}}&#39;</span>
        <span class="p">},</span>
        <span class="s2">&quot;done&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div>
<h3 id="6-cicd-pipeline-githubworkflowsciyml">6. CI/CD Pipeline (.github/workflows/ci.yml)</h3>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CI</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">dev</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>

<span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="nt">UV_CACHE_DIR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/.uv-cache</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">lint</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install uv</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">astral-sh/setup-uv@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;latest&quot;</span>
<span class="w">          </span><span class="nt">enable-cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">cache-dependency-glob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;uv.lock&quot;</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv python install 3.11</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv sync --all-extras</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check formatting</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv run ruff format --check src tests</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Lint</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv run ruff check src tests</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Type check</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv run mypy src</span>

<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;3.11&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;3.12&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install uv</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">astral-sh/setup-uv@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;latest&quot;</span>
<span class="w">          </span><span class="nt">enable-cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python ${{ matrix.python-version }}</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv python install ${{ matrix.python-version }}</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv sync --all-extras</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv run pytest --cov-report=xml</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload coverage</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">codecov/codecov-action@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">files</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">coverage.xml</span>
<span class="w">          </span><span class="nt">fail_ci_if_error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">CODECOV_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.CODECOV_TOKEN }}</span>

<span class="w">  </span><span class="c1"># Prevent merging if CI fails</span>
<span class="w">  </span><span class="nt">ci-success</span><span class="p">:</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">lint</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">test</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CI Passed</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;All CI checks passed!&quot;</span>
</code></pre></div>
<h3 id="7-pre-commit-configuration-pre-commit-configyaml">7. Pre-commit Configuration (.pre-commit-config.yaml)</h3>
<div class="highlight"><pre><span></span><code><span class="nt">repos</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/astral-sh/ruff-pre-commit</span>
<span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v0.8.0</span>
<span class="w">    </span><span class="nt">hooks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ruff</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">--fix</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ruff-format</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
<span class="w">    </span><span class="nt">hooks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mypy</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mypy (uv)</span>
<span class="w">        </span><span class="nt">entry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv run mypy src</span>
<span class="w">        </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">system</span>
<span class="w">        </span><span class="nt">pass_filenames</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pre-commit/pre-commit-hooks</span>
<span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v5.0.0</span>
<span class="w">    </span><span class="nt">hooks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trailing-whitespace</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">end-of-file-fixer</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-yaml</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-json</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-added-large-files</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;--maxkb=1000&#39;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-merge-conflict</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect-private-key</span>
</code></pre></div>
<h3 id="8-environment-template-envexample">8. Environment Template (.env.example)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># AI Psychiatrist Configuration (Paper-Optimal)</span>
<span class="c1"># Copy to .env and fill in values</span>

<span class="c1"># ============== Required ==============</span>
<span class="nv">OLLAMA_HOST</span><span class="o">=</span><span class="m">127</span>.0.0.1
<span class="nv">OLLAMA_PORT</span><span class="o">=</span><span class="m">11434</span>

<span class="c1"># ============== LLM Models (Paper-Optimal) ==============</span>
<span class="c1"># Paper baseline (Section 2.2): Gemma 3 27B for the multi-agent system</span>
<span class="nv">MODEL_QUALITATIVE_MODEL</span><span class="o">=</span>gemma3:27b
<span class="nv">MODEL_JUDGE_MODEL</span><span class="o">=</span>gemma3:27b
<span class="nv">MODEL_META_REVIEW_MODEL</span><span class="o">=</span>gemma3:27b

<span class="c1"># Paper Appendix F: MedGemma improves quantitative MAE (0.505 vs 0.619) but makes fewer predictions</span>
<span class="nv">MODEL_QUANTITATIVE_MODEL</span><span class="o">=</span>alibayram/medgemma:27b

<span class="c1"># Embedding model family (Section 2.2): Qwen 3 8B Embedding</span>
<span class="c1"># Note: the paper does not specify quantization; Q8_0 is a recommended implementation default.</span>
<span class="nv">MODEL_EMBEDDING_MODEL</span><span class="o">=</span>qwen3-embedding:8b

<span class="c1"># Alternative (paper baseline quantitative model):</span>
<span class="c1"># MODEL_QUANTITATIVE_MODEL=gemma3:27b</span>

<span class="c1"># ============== Feedback Loop (Paper Section 2.3.1) ==============</span>
<span class="nv">FEEDBACK_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">FEEDBACK_MAX_ITERATIONS</span><span class="o">=</span><span class="m">10</span>
<span class="c1"># Paper: &quot;score below four&quot; triggers refinement (threshold=3 means &lt;4)</span>
<span class="nv">FEEDBACK_SCORE_THRESHOLD</span><span class="o">=</span><span class="m">3</span>

<span class="c1"># ============== Embedding/Few-Shot (Paper Appendix D) ==============</span>
<span class="c1"># Paper optimal hyperparameters:</span>
<span class="nv">EMBEDDING_DIMENSION</span><span class="o">=</span><span class="m">4096</span>
<span class="nv">EMBEDDING_TOP_K_REFERENCES</span><span class="o">=</span><span class="m">2</span>
<span class="nv">EMBEDDING_CHUNK_SIZE</span><span class="o">=</span><span class="m">8</span>
<span class="nv">EMBEDDING_CHUNK_STEP</span><span class="o">=</span><span class="m">2</span>

<span class="c1"># ============== Server ==============</span>
<span class="nv">OLLAMA_TIMEOUT_SECONDS</span><span class="o">=</span><span class="m">180</span>
<span class="nv">API_HOST</span><span class="o">=</span><span class="m">0</span>.0.0.0
<span class="nv">API_PORT</span><span class="o">=</span><span class="m">8000</span>

<span class="c1"># ============== Logging ==============</span>
<span class="nv">LOG_LEVEL</span><span class="o">=</span>INFO
<span class="nv">LOG_FORMAT</span><span class="o">=</span>json<span class="w">  </span><span class="c1"># json or console</span>
</code></pre></div>
<h2 id="acceptance-criteria">Acceptance Criteria</h2>
<h3 id="tests-testsunittest_bootstrappy">Tests (tests/unit/test_bootstrap.py)</h3>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;Tests for project bootstrap.&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">ai_psychiatrist</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TestProjectStructure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test project structure is correct.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_pyproject_toml_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;pyproject.toml should exist at project root.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;pyproject.toml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_src_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;src/ai_psychiatrist package should exist.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;src/ai_psychiatrist/__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_tests_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;tests directory should exist with subdirs.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;tests/unit&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;tests/integration&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;tests/e2e&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_package_subdirectories</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Package should have expected subdirectories.&quot;&quot;&quot;</span>
        <span class="n">subdirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;agents&quot;</span><span class="p">,</span> <span class="s2">&quot;domain&quot;</span><span class="p">,</span> <span class="s2">&quot;services&quot;</span><span class="p">,</span> <span class="s2">&quot;infrastructure&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">subdir</span> <span class="ow">in</span> <span class="n">subdirs</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;src/ai_psychiatrist/</span><span class="si">{</span><span class="n">subdir</span><span class="si">}</span><span class="s2">/__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TestImports</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that package can be imported.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_import_package</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Package should be importable with version from metadata.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ai_psychiatrist</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">ai_psychiatrist</span><span class="o">.</span><span class="n">__version__</span>  <span class="c1"># Not empty</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TestMakefile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test Makefile targets work.&quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_make_help</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;make help should run without error.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;make&quot;</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="s2">&quot;help&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TestEnvExample</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test .env.example contains paper-optimal values.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_env_example_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;.env.example should exist.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.env.example&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_env_example_has_paper_optimal_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;.env.example should contain paper-optimal configuration.&quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.env.example&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

        <span class="c1"># Paper-optimal models</span>
        <span class="k">assert</span> <span class="s2">&quot;gemma3:27b&quot;</span> <span class="ow">in</span> <span class="n">content</span>
        <span class="k">assert</span> <span class="s2">&quot;alibayram/medgemma:27b&quot;</span> <span class="ow">in</span> <span class="n">content</span>
        <span class="k">assert</span> <span class="s2">&quot;qwen3-embedding:8b&quot;</span> <span class="ow">in</span> <span class="n">content</span>

        <span class="c1"># Paper-optimal hyperparameters</span>
        <span class="k">assert</span> <span class="s2">&quot;EMBEDDING_DIMENSION=4096&quot;</span> <span class="ow">in</span> <span class="n">content</span>
        <span class="k">assert</span> <span class="s2">&quot;EMBEDDING_TOP_K_REFERENCES=2&quot;</span> <span class="ow">in</span> <span class="n">content</span>
        <span class="k">assert</span> <span class="s2">&quot;EMBEDDING_CHUNK_SIZE=8&quot;</span> <span class="ow">in</span> <span class="n">content</span>
        <span class="k">assert</span> <span class="s2">&quot;FEEDBACK_SCORE_THRESHOLD=3&quot;</span> <span class="ow">in</span> <span class="n">content</span>
        <span class="k">assert</span> <span class="s2">&quot;FEEDBACK_MAX_ITERATIONS=10&quot;</span> <span class="ow">in</span> <span class="n">content</span>
</code></pre></div>
<h2 id="migration-notes">Migration Notes</h2>
<h3 id="from-old-structure">From Old Structure</h3>
<ol>
<li>Move <code>agents/*.py</code> â†’ <code>src/ai_psychiatrist/agents/</code></li>
<li>Move <code>server.py</code> â†’ <code>src/ai_psychiatrist/api/main.py</code></li>
<li>Keep <code>assets/env_reqs.yml</code> temporarily for research reproducibility; remove only after parity is proven</li>
<li>Keep <code>slurm/</code> for HPC compatibility (documented in Specs 01/04)</li>
</ol>
<h3 id="breaking-changes">Breaking Changes</h3>
<ul>
<li>Python &gt;= 3.11 required for the refactor (<code>pyproject.toml</code>)</li>
<li>Import path changes: <code>from agents.x import Y</code> â†’ <code>from ai_psychiatrist.agents.x import Y</code></li>
<li>Refactor path uses <code>uv</code>; legacy scripts may still use conda until migrated</li>
</ul>
<h2 id="verification-steps">Verification Steps</h2>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Install all dependencies (incl. dev/docs extras)</span>
uv<span class="w"> </span>sync<span class="w"> </span>--all-extras

<span class="c1"># 2. Run full CI check locally</span>
make<span class="w"> </span>ci

<span class="c1"># 3. (Optional) Run pre-commit on everything</span>
uv<span class="w"> </span>run<span class="w"> </span>pre-commit<span class="w"> </span>run<span class="w"> </span>--all-files
</code></pre></div>
<h2 id="dependencies-on-other-specs">Dependencies on Other Specs</h2>
<ul>
<li><strong>None</strong> - This is the foundation spec</li>
</ul>
<h2 id="specs-that-depend-on-this">Specs That Depend on This</h2>
<ul>
<li><strong>All subsequent specs</strong> (02-12)</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.copy", "content.action.edit", "content.action.view", "navigation.tracking", "navigation.sections", "navigation.footer", "navigation.instant"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>